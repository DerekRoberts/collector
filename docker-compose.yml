# Docker Compose file for the PDC's Hub Stack
#
#
# Used for collecting aggregate data queries.
#
# Use secondary .YML files for development and add -f YOUR.YML at execution.


composer:
  container_name: composer
  hostname: composer
  image: healthdatacoalition/composer:${TAG}
  restart: always
  log_driver: "syslog"
  links:
    - composerdb:database
  ports:
    - "2774:22"
    - "3002:3002"
  volumes:
    - ${VOLS}/config/authorized_keys/:/home/autossh/.ssh/:rw
    - ${VOLS}/config/composer_keys/:/etc/ssh/:rw
    - ${VOLS}/config/scheduled_jobs/:/app/util/job_params/:rw


composerdb:
  container_name: composerdb
  hostname: composerdb
  image: healthdatacoalition/composerdb:${TAG}
  restart: always
  log_driver: "syslog"
  volumes:
    - ${VOLS}/private/composerDb/live/:/data/db/:rw
    - ${VOLS}/private/composerDb/dump/:/data/dump/:rw
