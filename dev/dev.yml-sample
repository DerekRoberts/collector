# Development Docker Compose file for the PDC's Hub Stack
#
#
# Settings here supplement and override those in the primary .YML file.
# E.g.:
#
# container:
#   build: /path/to/Dockerfile
#   log_driver: "json-file"
#   environment:
#     - VARIABLE=value
#
# https://docs.docker.com/compose/compose-file/


composer:
  log_driver: "json-file"
#  build: ./dev/composer


hubdb:
  log_driver: "json-file"
  ports:
    - "27017:27017"
#  build: ./dev/hubdb


endpoint:
  log_driver: "json-file"
#  build: ./dev/gateway
  container_name: endpoint
  hostname: endpoint
  image: pdcbc/gateway:${TAG}
  restart: always
  links:
    - composer:composer
  ports:
    - 3001:3001
  volumes:
    - ${VOLS}/private/endpoint:/volumes/
  environment:
    - PORT_AUTOSSH=22
    - GATEWAY_ID=0
    - IP_COMPOSER=composer
